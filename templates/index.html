<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Case Opening Webpage</title>
    <style>
        /* General Styles */
        body {
            font-family: Arial, sans-serif;
            background: #1e1e2f;
            color: #fff;
            margin: 0;
            padding: 0;
        }

        header {
            background: #282846;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5em;
            color: #50c878;
        }

        .user-info {
            font-size: 1em;
            color: #fff;
        }

        nav {
            display: flex;
            gap: 15px;
        }

        nav a {
            text-decoration: none;
            color: #fff;
            font-size: 1em;
            transition: color 0.3s;
        }

        nav a:hover {
            color: #50c878;
        }

        .container {
            padding: 20px;
        }

        /* Section Titles */
        h2 {
            margin-top: 0;
            font-size: 2em;
            color: #fff;
        }

        /* Case Grid */
        .cases-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }

        .case {
            background: #323250;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            transition: transform 0.3s, background 0.3s;
        }

        .case:hover {
            transform: translateY(-5px);
            background: #3a3a5c;
        }

        .case img {
            max-width: 100%;
            border-radius: 8px;
        }

        .case h3 {
            margin: 10px 0;
            font-size: 1.2em;
        }

        .case button {
            background: #50c878;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .case button:hover {
            background: #45b468;
        }

        /* Inventory Grid */
        .inventory {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .inventory-item {
            background: #323250;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }

        .inventory-item img {
            max-width: 100%;
            border-radius: 8px;
        }

        .inventory-item button {
            margin-top: 10px;
            background: #e74c3c;
            color: #fff;
            border: none;
            padding: 5px 15px;
            border-radius: 5px;
            cursor: pointer;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .cases-grid,
            .inventory {
                grid-template-columns: 1fr;
            }

            .case button,
            .inventory-item button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">Case Opener</div>
        <div class="user-info">
            <span id="balance">Balance: $0</span>
        </div>
        <nav>
            <a href="#">Home</a>
            <a href="#cases">Cases</a>
            <a href="#inventory">Inventory</a>
        </nav>
    </header>

    <div id="game" style="display: none;">
    </div>
    <div class="container">
        <section id="cases">
            <h2>Available Cases</h2>
            <div class="case">
                <img src="/static/case/royal.avif" alt="Item Image">
                <h3>Stan's Dad's Bank</h3>
                <button class="preview-button" data-case="royal">Preview</button>
                <button>Open Case</button>
            </div>
            <div class="case">
                <img src="/static/case/supman.avif" alt="Item Image">
                <h3>Ron's Prison</h3>
                <button class="preview-button" data-case="gold">Preview</button>
                <button>Open Case</button>
            </div>
        </section>
    </div>

    <!-- Preview Modal -->
    <div id="previewModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Case Preview</h2>
            <div class="preview-items">
                <!-- Preview items will be dynamically added here -->
            </div>
        </div>
    </div>
</body>
</html>
<style>
    /* Modal Styles */
    .modal {
        position: fixed;
        z-index: 1;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0,0,0,0.7);
    }

    .modal-content {
        background-color: #323250;
        margin: 15% auto;
        padding: 20px;
        border-radius: 8px;
        width: 80%;
        max-width: 600px;
    }

    .close {
        color: #aaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
        cursor: pointer;
    }

    .close:hover {
        color: #fff;
    }

    .preview-items {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
        gap: 15px;
        margin-top: 20px;
    }
</style>

<script>
// Define the items for each case
const caseItems = {
    royal: [
        { name: "Fittty", img: "static/case/fitty.png" },
        { name: "Stan's Huzz'", img: "static/case/stans Huz.png" }
    ],
    gold: [
        { name: "Ron Pork", img: "static/case/ronpnose.png" },
        { name: "Chub Master", img: "static/case/chubmaster.png" }
    ]
};

// Handle the "Preview" button click
document.querySelectorAll('.preview-button').forEach(button => {
    button.onclick = function() {
        const caseType = button.getAttribute('data-case'); // Get the case type (e.g., 'royal' or 'gold')
        const previewItems = caseItems[caseType]; // Get the items for that case

        // Clear the current preview items
        const previewContainer = document.querySelector('.preview-items');
        previewContainer.innerHTML = ''; // Reset preview content

        // Populate the modal with items
        previewItems.forEach(item => {
            const itemElement = document.createElement('div');
            itemElement.classList.add('inventory-item');

            const itemImage = document.createElement('img');
            itemImage.src = item.img;
            itemElement.appendChild(itemImage);

            const itemName = document.createElement('h4');
            itemName.textContent = item.name;
            itemElement.appendChild(itemName);

            previewContainer.appendChild(itemElement);
        });

        // Show the modal
        document.getElementById('previewModal').style.display = 'block';
    };
});

// Close the modal
document.querySelector('.close').onclick = function() {
    document.getElementById('previewModal').style.display = 'none';
};

// Close the modal if clicking outside
window.onclick = function(event) {
    if (event.target == document.getElementById('previewModal')) {
        document.getElementById('previewModal').style.display = 'none';
    }
};




</script>
<div id="loginModal" class="modal">
    <div class="modal-content">
        <h2>Login</h2>
        <form id="loginForm">
            <input type="text" id="username" placeholder="Username" required>
            <input type="password" id="password" placeholder="Password" required>
            <button type="submit">Login</button>
        </form>
    </div>
</div>

<style>
    #loginModal {
        display: block;
        position: fixed;
        z-index: 9999;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0,0,0,0.7);
    }
    
    #loginForm {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }
    
    #loginForm input {
        padding: 10px;
        border-radius: 5px;
        border: 1px solid #50c878;
        background: #282846;
        color: #fff;
    }
    
    #loginForm button {
        padding: 10px;
        background: #50c878;
        color: #fff;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }
</style>

<script>
document.getElementById('loginForm').onsubmit = async function(e) {
    e.preventDefault();
    const username = document.getElementById('username').value;
    const password = document.getElementById('password').value;

    try {
        const response = await fetch('/static/users.json');
        if (!response.ok) {
            throw new Error('Failed to fetch user data.');
        }
        const users = await response.json();
        const user = users.find(u => u.username === username && u.password === password);

        if (user) {
            user.money = typeof user.money === 'number' ? user.money : 0;
            document.getElementById('loginModal').style.display = 'none';
            document.getElementById('game').style.display = 'block';
            updateUI(user);
        } else {
            alert('Invalid username or password.');
        }
    } catch (error) {
        console.error('Error during login:', error);
        alert('An error occurred while trying to log in.');
    }
};

function updateUI(user) {
    document.getElementById('balance').innerText = `Balance: $${user.money}`;
}

function placeBet() {
    const betAmount = parseFloat(document.getElementById('bet-amount').value);
    if (isNaN(betAmount) || betAmount <= 0 || betAmount > MAX_BET) {
        alert(`Please enter a valid bet amount greater than 0 and up to $${MAX_BET}.`);
        return;
    }
}

// Check if user is logged in
if (sessionStorage.getItem('username')) {
    document.getElementById('loginModal').style.display = 'none';
}
</script>
</script>
</form>
</div>